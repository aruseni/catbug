/*! catbug.js 0.0.0
 *  2013-05-18 22:26:26 +0400
 *  https://github.com/pozadi/catbug.js
 */
window.catbug=function(){return catbug.module.apply(catbug,arguments)},catbug.ns=function(t,e){var r,n,l,u,i;for(r=this,i=t.split("."),l=0,u=i.length;u>l;l++)n=i[l],n&&(r=r[n]||(r[n]={}));return e.call(r,this)},catbug.ns("treeParser",function(){var t,e;return e=function(t){return/\S+/.test(t)},t=function(t){var e;return{level:(null!=(e=/^\s+/.exec(t))?e[0].length:void 0)||0,data:$.trim(t)}},this.parseToRaw=function(r){var n,l,u;return l=_.chain(r.split("\n")).filter(e).map(t).value(),u=function(t,e){var r,n,l,u,i;for(null==e&&(e="level"),r=_.min(_.pluck(t,"level")),i=[],l=0,u=t.length;u>l;l++)n=t[l],i.push(n[e]=n.level-r);return i},u(l),n=function(t,e){var r,l,i,a,o,s,c;for(u(t,"normLevel"),o=[],l=null,r=function(){var t;return l?(t={data:l.data,level:l.level,parent:e},t.children=n(a,t),o.push(t)):void 0},s=0,c=t.length;c>s;s++)if(i=t[s],i.normLevel>0){if(!l)throw Error("unexpected indent");a.push(i)}else r(),l=i,a=[];return r(),o},n(l,null)},this.flat=function(t){var e,r;return r=[],e=function(t){var n,l,u,i;for(i=[],l=0,u=t.length;u>l;l++)n=t[l],r.push(n),i.push(e(n.children));return i},e(t),r},this.parseAttributes=function(t){var e,r,n,l,u,i,a,o;if(n={},t)for(a=t.split(/\s+/),u=0,i=a.length;i>u;u++)e=a[u],o=e.split("="),r=o[0],l=o[1],n[r]=null!=l?l.replace(/^["']|["']$/g,""):void 0;return n},this.parseLine=function(t){var e;if(e=/^([^\(\)]+)(?:\(([^\(\)]+)\))?$/.exec(t))return{selector:$.trim(e[1]),attributes:this.parseAttributes(e[2])};throw Error("wrong syntax")},this.parse=function(t){var e,r,n,l,u,i;if(n=this.parseToRaw(t),1!==n.length)throw Error("more than one root");for(r=this.flat(n),l=0,u=r.length;u>l;l++)e=r[l],_.extend(e,this.parseLine(e.data)),e.selector=e.selector.replace("&",null!=(i=e.parent)?i.selector:void 0);return r=_.map(r,function(t){return _.pick(t,"selector","attributes","level")}),{root:_.findWhere(r,{level:0}),elements:_.filter(r,function(t){return t.level>0})}}}),jQuery.prototype.catbug=function(){};